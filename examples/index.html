<html>
  <head>
    <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
    <script src="../../bundle.js"></script>
  </head>
  <body>
    <a-scene>
      <!--
        Camera + Keyboard controls
      -->
      <a-entity camera
                position="0 1 0"
                look-controls
                keyboard-controls
                sound="src: assets/321103__nsstudios__blip1.wav;
                       on: keydown:e">
      </a-entity>

      <!--
        Example scene, blatantly copied from an official example:
        https://github.com/aframevr/aframe/tree/master/examples/template-models
      -->
      <a-model src="assets/tree1.dae" position="1 0 -1" rotation="0 30 0" scale="1.4 1.4 1.4"></a-model>
      <a-model src="assets/tree2.dae" position="2.5 0 1.5" rotation="0 25 0" scale="1.4 1.4 1.4"></a-model>
      <a-model src="assets/tree2.dae" position="-2 0 -4" rotation="0 60 0" scale="1.5 1.5 1.5"></a-model>
      <a-model src="assets/tree1.dae" position="-8 0 -9" rotation="0 60 0" scale="1.4 1.4 1.4"></a-model>
      <a-model src="assets/tree2.dae" position="-12 0 3" rotation="0 60 0" scale="1.5 1.5 1.5"></a-model>
      <a-model src="assets/tree1.dae" position="-7 0 -3" rotation="0 60 0" scale="1.3 1.3 1.3"></a-model>
      <a-model src="assets/tree2.dae" position="-4 0 1" rotation="0 10 0" scale="1.4 1.4 1.4"></a-model>
      <a-model src="assets/tree1.dae" position="-5 0 5" rotation="0 45 0" scale="1.5 1.5 1.5"></a-model>
      <a-model src="assets/tree2.dae" position="0 0 9" rotation="0 220 0" scale="1.6 1.6 1.6"></a-model>
      <a-model src="assets/tree2.dae" position="-2 0 12" rotation="0 30 0" scale="1.4 1.4 1.4"></a-model>
      <a-model src="assets/tree1.dae" position="-7 0 10" rotation="0 30 0" scale="1.4 1.4 1.4"></a-model>

      <!--
        Sky
      -->
      <a-sky src="assets/peach-gradient-1.jpg"></a-sky>

      <!--
        Lighting
      -->
      <a-light type="ambient" color="#ccc"></a-light>
      <a-light color="#ddf" distance="100" intensity="0.4" type="point"></a-light>

    </a-scene>
    <p id="mode-instruction" style="position: fixed; top: 5px; left: 5px; background-color: rgba(0,0,0,0.5); color: white; padding: 10px;">Mode: Default. (&lt;Space&gt; to change)</p>
    <script>
      var controlledEl = document.querySelector('[keyboard-controls]');
      var instructionEl = document.querySelector('#mode-instruction');

      controlledEl.addEventListener('keyup:Space', function() {

        var mode = controlledEl.getComputedAttribute('keyboard-controls').mode;

        if (mode === 'default') {
          mode = 'fly';
          instructionEl.innerHTML = 'Mode: Fly. (&lt;Space&gt; to change)'
        } else if (mode === 'fly') {
          mode = 'fps';
          instructionEl.innerHTML = 'Mode: First Person Shooter. (&lt;Space&gt; to change)'
        } else if (mode === 'fps') {
          mode = 'default';
          instructionEl.innerHTML = 'Mode: Default. (&lt;Space&gt; to change)'

        }

        console.log('settigng mode:', mode);
        controlledEl.setAttribute('keyboard-controls', 'mode', mode);
      });
    </script>
  </body>
</html>
